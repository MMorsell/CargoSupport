@model List<CargoSupport.Models.DatabaseModels.DataModel>;
@{
    ViewData["Title"] = "Föraranalys";
}

<div class="container-flow">
    <div class="row">
        <div class="col-4">
            <h6>Visa data</h6>
            <div>
                <div style="padding-left: 20px;" class="group">
                    <label class="input-label">Från</label>
                    <input type="text" id="calendar-from-graphs-dashboard">
                    <span class="bar"></span>
                </div>
                <div style="padding-left: 30px;" class="group">
                    <label class="input-label">Till</label>
                    <input type="text" id="calendar-to-graphs-dashboard">
                    <span class="bar"></span>
                </div>
            </div>
        </div>
        <div class="col-4">
        </div>
        <div class="col-4">
        </div>
    </div>
    <div class="row ">
        <table id="dataTable" class="table table-striped table-bordered" style="width:100%; white-space: nowrap;">
            <thead style="position: sticky; top: 0;">
            </thead>
        </table>
    </div>
</div>

@section Scripts
{
    <script>
        let table;
        const mainApiEndpoint = driverExtendedStats + '?fromDate=2020-08-27&toDate=2020-08-31&reportingTo=9006';
        fromDate = moment();
        toDate = moment();

        function reloadGraphs(returnData) {
        }

        $(document).ready(function () {
            table = $('#dataTable').DataTable({
                pageLength: 250,
                "ajax": {
                    "url": '/api/Analyze/GetSlim',
                    "data": {
                        "fromDate": function () { return fromDate.format(timeFormat) },
                        "toDate": function () { return toDate.format(timeFormat) }
                    },
                    "dataSrc": ""
                },
                columnDefs: [
                    { "width": "20%", "targets": 3 }
                ],
                columns: [
                    { data: 'driverFullName', title: 'Leveransansvarig', render: driver_extendedInfo },
                    //{ data: 'driverFullName', title: 'Chef', render: driver_extendedInfo },
                    { data: 'avrWeight', title: 'Snittvikt', render: input_kilos },
                    { data: 'avrCustomers', title: 'Snitt antal kunder' },
                    { data: 'avrDrivingDistance', title: 'Snitt Kördistans i mil' },
                ],
                "order": [[1, "asc"]],

            });

            $('thead th').each(function () {
                $(this).addClass("stickyHeader");
            })

            getDataBetweenDatesAndReportingToString(driverExtendedStats);
        }
    </script>
}