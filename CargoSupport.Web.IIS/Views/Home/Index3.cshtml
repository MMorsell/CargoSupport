@model List<CargoSupport.Models.DatabaseModels.DataModel>;
@{
    ViewData["Title"] = "Home Page";
}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<link rel="stylesheet" type="text/css"
      href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.css">
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.21/css/dataTables.bootstrap4.min.css">
<link rel="stylesheet" type="text/css"
      href="https://cdn.datatables.net/rowreorder/1.2.7/css/rowReorder.bootstrap4.min.css">

<div class="container">

    <table id="example" class="table table-striped table-bordered" style="width:100%; white-space: nowrap;">
        <thead>
        </thead>
    </table>
    @section Scripts
{
        <script src="~/lib/aspnet/signalr/dist/browser/signalr.js"></script>
        <script src="~/js/chat.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment.min.js"></script>
        <script src="https://npmcdn.com/flatpickr/dist/l10n/sv.js"></script>
        <script src="https://code.jquery.com/jquery-3.5.1.min.js"
                integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
        <script type="text/javascript" charset="utf8"
                src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>
        <script type="text/javascript" charset="utf8"
                src="https://cdn.datatables.net/1.10.21/js/dataTables.bootstrap4.min.js"></script>
        <script type="text/javascript" charset="utf8"
                src="https://cdn.datatables.net/rowreorder/1.2.7/js/dataTables.rowReorder.min.js"></script>

        <script>
            const disabled_checkbox = function (data, type, full, meta) {
                var is_checked = data == true ? "checked" : "";
                return '<input type="checkbox" disabled class="checkbox" ' +
                    is_checked + ' />';
            }

            const disabled_textInput = function (data, type, full, meta) {
                return '<input type="text" disabled class="form-control" value="' +
                    data + '"  />';
            }
            const disabled_intInput = function (data, type, full, meta) {
                return '<input type="number" disabled class="form-control" value="' +
                    data + '"  />';
            }

            $(document).ready(function () {
                table = $('#example').DataTable({
                    pageLength: 100,
                    "ajax": {
                        "url": "https://localhost:44374/api/public/GetPublic",
                        "dataSrc": function (response) {
                            dataR = response;
                        },
                        "dataSrc": ""
                    },
                    columns: [
                        { data: 'routeName', title: 'Turnamn' },
                        { data: 'driver.fullName', title: 'Lev. Ansvarig' },
                        { data: 'carNumber', title: 'Bilnr', render: disabled_textInput },
                        { data: 'portNumber', title: 'Port', render: disabled_textInput },
                        { data: 'loadingIsDone', title: 'Lastning klar', render: disabled_checkbox },
                        { data: 'preRideAnnotation', title: 'Kommentar', render: disabled_textInput },
                        { data: 'numberOfCustomers', title: 'Kunder' },
                        { data: 'numberOfColdBoxes', title: 'Lådor' },
                        { data: 'restPlock', title: 'Restplock', render: disabled_checkbox },
                        { data: 'numberOfFrozenBoxes', title: 'Frys' },
                        { data: 'numberOfBreadBoxes', title: 'Bröd' },
                    ],
                    "order": [[1, "asc"]],

                });

            });
            function reloadAjax() {
                table.ajax.reload(null, false);
            }
        </script>
    }